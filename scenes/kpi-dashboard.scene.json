{
  "nodes": [
    {
      "id": "artifact/kpi_dashboard_v0_2026_02_15",
      "type": "artifact",
      "artifact_type": "metrics_and_audit_protocol",
      "title": "KPI Dashboard v0",
      "version": "0.1",
      "summary": {
        "high_level": "Defines a file-based KPI dashboard for second-brain health with agent-delegable metrics computed from workflows.",
        "details": "Computes principle-linked %, closeout pass rate, resumption quality, orphan ratio, core-project coverage, health score, and trend deltas using sessions/scenes/graph outputs. Produces metrics JSON + alert candidates with high cold-start resumability."
      },
      "core_principles_linked": [
        "principle/architecture_portable_tools_not",
        "principle/agent_builds_agent_maintains",
        "principle/principles_over_rules",
        "principle/system_as_infrastructure"
      ],
      "pattern_links": [
        "pattern/dan_codex_meta_workflow_v1",
        "pattern/hyperfast_agent_session_loop",
        "pattern/kpi_dashboard_audit_loop_v0"
      ],
      "tool_links": [
        "tool/sb_graph_ingest_v0",
        "tool/sb_kpi_compute_v0",
        "tool/jq",
        "tool/bash"
      ],
      "project_links": [
        "project/dan_personal_cognitive_infrastructure"
      ],
      "related_artifact_links": [
        "artifact/vision_alignment_audit_2026_02_15_v0",
        "artifact/hyperfast_agent_workflow_v0_2026_02_15"
      ],
      "resumption_score": 9,
      "resumption_notes": "Load taxonomy + alias policy, sessions indexes/artifacts, and graph/canonical outputs. Recompute from scratch in under two minutes.",
      "open_questions": [
        "1. Should dashboard include rolling 7-day and 30-day deltas by default?",
        "2. Should low KPI alerts auto-append to OPEN_QUESTIONS.md or remain agent-internal first?",
        "3. Should KPI scope expand to sub-project profiles (for example kalshi_15m_btc_pipeline)?"
      ],
      "next_steps": [
        "1. Run tools/sb_kpi_compute_v0.sh and validate metrics/alerts output.",
        "2. Add optional weekly trigger in meta-program flow for periodic dashboard recompute.",
        "3. Feed dashboard deltas into vision-alignment audit closeout."
      ],
      "thinking_trace_attachments": [
        "Keep KPI compute portable (file-I/O only), deterministic, and agent-runnable; defer visualization dependencies."
      ],
      "prompt_lineage": [
        {
          "role": "system",
          "ref": "prompts/meta_program/50_agent_owned_audit.txt",
          "summary": "Audit execution scaffold"
        },
        {
          "role": "user",
          "summary": "Expand KPI dashboard into agent-consumable protocol with alerts and trends"
        }
      ],
      "kpi_dashboard_protocol": {
        "overview": "Agent-runnable protocol to compute, store, and alert on KPI health with file-I/O only.",
        "invariant_id": "inv/observability_entropy",
        "enforcement_mode": "track_only",
        "non_goals": [
          "KPIs never gate commits, closeouts, or merges.",
          "KPIs may raise alerts and propose actions only.",
          "Alerts never mutate artifacts automatically."
        ],
        "prerequisites": {
          "load_sequence": [
            "1. Taxonomy + canonical alias policy",
            "2. sessions/*/index.json and sessions/*/*.json",
            "3. graph/graph.json (or graph/canonical.jsonl)",
            "4. Closeout thresholds from meta/CLOSEOUT_CONTRACT_v0.md",
            "5. (Optional) Terminology standard from meta/TERMINOLOGY_STANDARD_v0.md for term fidelity tracking"
          ],
          "assumptions": "No external APIs/DB; Bash/jq/Python available locally."
        },
        "computation_phases": {
          "phase_1_aggregate_data": {
            "description": "Scan raw sources and compute base metrics.",
            "actions": [
              "Count total and eligible artifacts",
              "Compute principle_linked_pct",
              "Compute closeout_pass_rate",
              "Compute resumption_avg, resumption_p50, and resumption_pct_ge_8",
              "Compute orphan_ratio",
              "Compute coverage_from_core when graph is available",
              "Compute health_score rollup"
            ],
            "output": "raw_metrics.json"
          },
          "phase_2_evaluate_and_alert": {
            "description": "Compare metrics to alert thresholds and generate actionable alerts (track-only).",
            "alert_thresholds": {
              "principle_linked_pct": ">=70%",
              "closeout_pass_rate": ">=90%",
              "resumption_avg": ">=7.0",
              "resumption_pct_ge_8": ">=60%",
              "orphan_ratio": "<=10%",
              "coverage_from_core": ">=80%",
              "health_score": ">=8.0"
            },
            "alert_policy": {
              "on_violation": [
                "Emit alert item with kpi_name, value, threshold, severity, suggested_actions"
              ],
              "on_repeat_violation": [
                "Escalate severity if violated in >=2 consecutive runs"
              ],
              "mutation_rule": "Alerts never mutate artifacts automatically."
            },
            "actions": [
              "Mark degraded KPIs",
              "Generate remediation suggestions",
              "For KPI violations that are artifact-attributable, include top offenders as artifact IDs",
              "Escalate repeated declines per alert_policy"
            ],
            "output": "alerts.json"
          },
          "phase_3_store_and_visualize": {
            "description": "Persist structured metrics and provide lightweight operator-friendly view.",
            "actions": [
              "Write reports/kpi_dashboard_metrics_v0.json (or v1 if upgraded)",
              "Optionally generate markdown table",
              "Ingest updated scene/report pointers via graph ingest"
            ],
            "output": "metrics JSON + optional markdown"
          }
        },
        "trends": {
          "comparison": "previous_run",
          "window_policy": {
            "artifact_window": 10,
            "time_window_days": 7,
            "mode": "prefer_time_window_else_artifact_window"
          },
          "outputs": [
            "delta",
            "delta_pct",
            "direction"
          ]
        },
        "resumption_primitives": {
          "cold_compute": "Run tools/sb_kpi_compute_v0.sh --full-scan",
          "incremental_update": "Recompute after closeout or ingest",
          "audit_integration": "Feed metrics into vision-alignment audit loop"
        },
        "metrics_for_dashboard": {
          "core_kpis": [
            "principle_linked_pct",
            "closeout_pass_rate",
            "resumption_avg",
            "resumption_p50",
            "resumption_pct_ge_8",
            "orphan_ratio",
            "coverage_from_core",
            "health_score"
          ],
          "derived_kpis": {
            "delegability_pct": {
              "definition": "Pct of artifacts in window that are executable by a fresh agent/human (actionable handoff).",
              "formula": "count(artifact where resumption_score>=8 AND next_steps_count>=1 AND (principle_links_count>=2 OR tool_links_count>=1)) / total * 100",
              "alert_threshold": ">=70%",
              "notes": "Delegability is not identical to resumption; it requires actionability."
            }
          },
          "optional_kpis": {
            "term_fidelity_pct": {
              "enforcement_mode": "track_only",
              "alert_threshold": "==100% (post-standard artifacts only)",
              "notes": "Track-only. Do not gate. Prefer counting violations with offender IDs."
            },
            "governance_interruptions_per_run": {
              "definition": "Count of hard-gate failures + required manual fixups per run (avoid time-based friction).",
              "alert_threshold": "<=1",
              "notes": "Optional. Only include if it reduces entropy without adding upkeep."
            }
          }
        }
      }
    },
    {
      "id": "concept/kpi_dashboard_protocol_v0",
      "type": "concept",
      "label": "KPI dashboard protocol v0",
      "definition": "Protocol for computing and evaluating second-brain health KPIs from local artifacts."
    },
    {
      "id": "pattern/kpi_dashboard_audit_loop_v0",
      "type": "pattern",
      "label": "KPI dashboard audit loop",
      "description": "Compute -> evaluate -> alert -> ingest -> iterate loop for infrastructure health."
    },
    {
      "id": "tool/sb_kpi_compute_v0",
      "type": "tool",
      "label": "sb_kpi_compute_v0.sh"
    },
    {
      "id": "tool/bash",
      "type": "tool",
      "label": "bash"
    },
    {
      "id": "tool/jq",
      "type": "tool",
      "label": "jq"
    },
    {
      "id": "artifact_pointer/vision_alignment_audit_report_v0",
      "type": "artifact_pointer",
      "label": "Vision alignment audit report",
      "path": "reports/vision_alignment_audit_v0.json"
    },
    {
      "id": "artifact_pointer/kpi_dashboard_metrics_v0",
      "type": "artifact_pointer",
      "label": "KPI dashboard metrics output",
      "path": "reports/kpi_dashboard_metrics_v0.json"
    }
  ],
  "edges": [
    {
      "from": "artifact/kpi_dashboard_v0_2026_02_15",
      "to": "concept/kpi_dashboard_protocol_v0",
      "type": "formalizes"
    },
    {
      "from": "artifact/kpi_dashboard_v0_2026_02_15",
      "to": "pattern/kpi_dashboard_audit_loop_v0",
      "type": "codifies"
    },
    {
      "from": "pattern/kpi_dashboard_audit_loop_v0",
      "to": "pattern/dan_codex_meta_workflow_v1",
      "type": "integrates_with"
    },
    {
      "from": "pattern/kpi_dashboard_audit_loop_v0",
      "to": "pattern/hyperfast_agent_session_loop",
      "type": "integrates_with"
    },
    {
      "from": "pattern/kpi_dashboard_audit_loop_v0",
      "to": "artifact_pointer/vision_alignment_audit_report_v0",
      "type": "extends"
    },
    {
      "from": "artifact/kpi_dashboard_v0_2026_02_15",
      "to": "project/dan_personal_cognitive_infrastructure",
      "type": "monitors"
    },
    {
      "from": "artifact/kpi_dashboard_v0_2026_02_15",
      "to": "principle/architecture_portable_tools_not",
      "type": "aligned_with"
    },
    {
      "from": "artifact/kpi_dashboard_v0_2026_02_15",
      "to": "principle/agent_builds_agent_maintains",
      "type": "aligned_with"
    },
    {
      "from": "artifact/kpi_dashboard_v0_2026_02_15",
      "to": "principle/principles_over_rules",
      "type": "aligned_with"
    },
    {
      "from": "artifact/kpi_dashboard_v0_2026_02_15",
      "to": "principle/system_as_infrastructure",
      "type": "aligned_with"
    },
    {
      "from": "artifact/kpi_dashboard_v0_2026_02_15",
      "to": "tool/sb_kpi_compute_v0",
      "type": "executed_by"
    },
    {
      "from": "artifact/kpi_dashboard_v0_2026_02_15",
      "to": "tool/bash",
      "type": "executed_by"
    },
    {
      "from": "artifact/kpi_dashboard_v0_2026_02_15",
      "to": "tool/jq",
      "type": "executed_by"
    },
    {
      "from": "artifact/kpi_dashboard_v0_2026_02_15",
      "to": "artifact_pointer/kpi_dashboard_metrics_v0",
      "type": "materializes_to"
    }
  ]
}
